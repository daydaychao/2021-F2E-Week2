import{z as yt}from"./vendor.c9c0133b.js";function k(n){return n!=null&&typeof n=="object"&&n["@@functional/placeholder"]===!0}function x(n){return function t(e){return arguments.length===0||k(e)?t:n.apply(this,arguments)}}function G(n){return function t(e,i){switch(arguments.length){case 0:return t;case 1:return k(e)?t:x(function(s){return n(e,s)});default:return k(e)&&k(i)?t:k(e)?x(function(s){return n(s,i)}):k(i)?x(function(s){return n(e,s)}):n(e,i)}}}var bt=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function dt(n){return n!=null&&typeof n["@@transducer/step"]=="function"}function vt(n,t,e){return function(){if(arguments.length===0)return e();var i=Array.prototype.slice.call(arguments,0),s=i.pop();if(!bt(s)){for(var r=0;r<n.length;){if(typeof s[n[r]]=="function")return s[n[r]].apply(s,i);r+=1}if(dt(s)){var o=t.apply(null,i);return o(s)}}return e.apply(this,arguments)}}var V={init:function(){return this.xf["@@transducer/init"]()},result:function(n){return this.xf["@@transducer/result"](n)}},Lt=function(){function n(t,e){this.xf=e,this.f=t}return n.prototype["@@transducer/init"]=V.init,n.prototype["@@transducer/result"]=V.result,n.prototype["@@transducer/step"]=function(t,e){return this.f(e),this.xf["@@transducer/step"](t,e)},n}(),Ht=G(function(t,e){return new Lt(t,e)}),Bt=Ht,Nt=G(vt([],Bt,function(t,e){return t(e),e})),Kt=Nt;const q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function J(n,t,e,i){let s,r,o;const f=t||[0],a=(e=e||0)>>>3,c=i===-1?3:0;for(s=0;s<n.length;s+=1)o=s+a,r=o>>>2,f.length<=r&&f.push(0),f[r]|=n[s]<<8*(c+i*(o%4));return{value:f,binLen:8*n.length+e}}function S(n,t,e){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(n){case"HEX":return function(i,s,r){return function(o,f,a,c){let p,w,h,A;if(o.length%2!=0)throw new Error("String of HEX type must be in byte increments");const g=f||[0],E=(a=a||0)>>>3,Y=c===-1?3:0;for(p=0;p<o.length;p+=2){if(w=parseInt(o.substr(p,2),16),isNaN(w))throw new Error("String of HEX type contains invalid characters");for(A=(p>>>1)+E,h=A>>>2;g.length<=h;)g.push(0);g[h]|=w<<8*(Y+c*(A%4))}return{value:g,binLen:4*o.length+a}}(i,s,r,e)};case"TEXT":return function(i,s,r){return function(o,f,a,c,p){let w,h,A,g,E,Y,y,B,b=0;const v=a||[0],L=(c=c||0)>>>3;if(f==="UTF8")for(y=p===-1?3:0,A=0;A<o.length;A+=1)for(w=o.charCodeAt(A),h=[],128>w?h.push(w):2048>w?(h.push(192|w>>>6),h.push(128|63&w)):55296>w||57344<=w?h.push(224|w>>>12,128|w>>>6&63,128|63&w):(A+=1,w=65536+((1023&w)<<10|1023&o.charCodeAt(A)),h.push(240|w>>>18,128|w>>>12&63,128|w>>>6&63,128|63&w)),g=0;g<h.length;g+=1){for(Y=b+L,E=Y>>>2;v.length<=E;)v.push(0);v[E]|=h[g]<<8*(y+p*(Y%4)),b+=1}else for(y=p===-1?2:0,B=f==="UTF16LE"&&p!==1||f!=="UTF16LE"&&p===1,A=0;A<o.length;A+=1){for(w=o.charCodeAt(A),B===!0&&(g=255&w,w=g<<8|w>>>8),Y=b+L,E=Y>>>2;v.length<=E;)v.push(0);v[E]|=w<<8*(y+p*(Y%4)),b+=2}return{value:v,binLen:8*b+c}}(i,t,s,r,e)};case"B64":return function(i,s,r){return function(o,f,a,c){let p,w,h,A,g,E,Y,y=0;const B=f||[0],b=(a=a||0)>>>3,v=c===-1?3:0,L=o.indexOf("=");if(o.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(o=o.replace(/=/g,""),L!==-1&&L<o.length)throw new Error("Invalid '=' found in base-64 string");for(w=0;w<o.length;w+=4){for(g=o.substr(w,4),A=0,h=0;h<g.length;h+=1)p=q.indexOf(g.charAt(h)),A|=p<<18-6*h;for(h=0;h<g.length-1;h+=1){for(Y=y+b,E=Y>>>2;B.length<=E;)B.push(0);B[E]|=(A>>>16-8*h&255)<<8*(v+c*(Y%4)),y+=1}}return{value:B,binLen:8*y+a}}(i,s,r,e)};case"BYTES":return function(i,s,r){return function(o,f,a,c){let p,w,h,A;const g=f||[0],E=(a=a||0)>>>3,Y=c===-1?3:0;for(w=0;w<o.length;w+=1)p=o.charCodeAt(w),A=w+E,h=A>>>2,g.length<=h&&g.push(0),g[h]|=p<<8*(Y+c*(A%4));return{value:g,binLen:8*o.length+a}}(i,s,r,e)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(i,s,r){return function(o,f,a,c){return J(new Uint8Array(o),f,a,c)}(i,s,r,e)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(i,s,r){return J(i,s,r,e)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function Q(n,t,e,i){switch(n){case"HEX":return function(s){return function(r,o,f,a){let c,p,w="";const h=o/8,A=f===-1?3:0;for(c=0;c<h;c+=1)p=r[c>>>2]>>>8*(A+f*(c%4)),w+="0123456789abcdef".charAt(p>>>4&15)+"0123456789abcdef".charAt(15&p);return a.outputUpper?w.toUpperCase():w}(s,t,e,i)};case"B64":return function(s){return function(r,o,f,a){let c,p,w,h,A,g="";const E=o/8,Y=f===-1?3:0;for(c=0;c<E;c+=3)for(h=c+1<E?r[c+1>>>2]:0,A=c+2<E?r[c+2>>>2]:0,w=(r[c>>>2]>>>8*(Y+f*(c%4))&255)<<16|(h>>>8*(Y+f*((c+1)%4))&255)<<8|A>>>8*(Y+f*((c+2)%4))&255,p=0;p<4;p+=1)g+=8*c+6*p<=o?q.charAt(w>>>6*(3-p)&63):a.b64Pad;return g}(s,t,e,i)};case"BYTES":return function(s){return function(r,o,f){let a,c,p="";const w=o/8,h=f===-1?3:0;for(a=0;a<w;a+=1)c=r[a>>>2]>>>8*(h+f*(a%4))&255,p+=String.fromCharCode(c);return p}(s,t,e)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(s){return function(r,o,f){let a;const c=o/8,p=new ArrayBuffer(c),w=new Uint8Array(p),h=f===-1?3:0;for(a=0;a<c;a+=1)w[a]=r[a>>>2]>>>8*(h+f*(a%4))&255;return p}(s,t,e)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(s){return function(r,o,f){let a;const c=o/8,p=f===-1?3:0,w=new Uint8Array(c);for(a=0;a<c;a+=1)w[a]=r[a>>>2]>>>8*(p+f*(a%4))&255;return w}(s,t,e)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}const l=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],R=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],T=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],M="Chosen SHA variant is not supported";function _(n,t){let e,i;const s=n.binLen>>>3,r=t.binLen>>>3,o=s<<3,f=4-s<<3;if(s%4!=0){for(e=0;e<r;e+=4)i=s+e>>>2,n.value[i]|=t.value[e>>>2]<<o,n.value.push(0),n.value[i+1]|=t.value[e>>>2]>>>f;return(n.value.length<<2)-4>=r+s&&n.value.pop(),{value:n.value,binLen:n.binLen+t.binLen}}return{value:n.value.concat(t.value),binLen:n.binLen+t.binLen}}function Z(n){const t={outputUpper:!1,b64Pad:"=",outputLen:-1},e=n||{},i="Output length must be a multiple of 8";if(t.outputUpper=e.outputUpper||!1,e.b64Pad&&(t.b64Pad=e.b64Pad),e.outputLen){if(e.outputLen%8!=0)throw new Error(i);t.outputLen=e.outputLen}else if(e.shakeLen){if(e.shakeLen%8!=0)throw new Error(i);t.outputLen=e.shakeLen}if(typeof t.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof t.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return t}function U(n,t,e,i){const s=n+" must include a value and format";if(!t){if(!i)throw new Error(s);return i}if(t.value===void 0||!t.format)throw new Error(s);return S(t.format,t.encoding||"UTF8",e)(t.value)}class O{constructor(t,e,i){const s=i||{};if(this.t=e,this.i=s.encoding||"UTF8",this.numRounds=s.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.s=t,this.o=[],this.h=0,this.u=!1,this.l=0,this.A=!1,this.H=[],this.S=[]}update(t){let e,i=0;const s=this.p>>>5,r=this.m(t,this.o,this.h),o=r.binLen,f=r.value,a=o>>>5;for(e=0;e<a;e+=s)i+this.p<=o&&(this.C=this.R(f.slice(e,e+s),this.C),i+=this.p);this.l+=i,this.o=f.slice(i>>>5),this.h=o%this.p,this.u=!0}getHash(t,e){let i,s,r=this.U;const o=Z(e);if(this.v){if(o.outputLen===-1)throw new Error("Output length must be specified in options");r=o.outputLen}const f=Q(t,r,this.K,o);if(this.A&&this.T)return f(this.T(o));for(s=this.F(this.o.slice(),this.h,this.l,this.g(this.C),r),i=1;i<this.numRounds;i+=1)this.v&&r%32!=0&&(s[s.length-1]&=16777215>>>24-r%32),s=this.F(s,r,0,this.B(this.s),r);return f(s)}setHMACKey(t,e,i){if(!this.L)throw new Error("Variant does not support HMAC");if(this.u)throw new Error("Cannot set MAC key after calling update");const s=S(e,(i||{}).encoding||"UTF8",this.K);this.M(s(t))}M(t){const e=this.p>>>3,i=e/4-1;let s;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(e<t.binLen/8&&(t.value=this.F(t.value,t.binLen,0,this.B(this.s),this.U));t.value.length<=i;)t.value.push(0);for(s=0;s<=i;s+=1)this.H[s]=909522486^t.value[s],this.S[s]=1549556828^t.value[s];this.C=this.R(this.H,this.C),this.l=this.p,this.A=!0}getHMAC(t,e){const i=Z(e);return Q(t,this.U,this.K,i)(this.k())}k(){let t;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");const e=this.F(this.o.slice(),this.h,this.l,this.g(this.C),this.U);return t=this.R(this.S,this.B(this.s)),t=this.F(e,this.U,this.p,t,this.U),t}}function F(n,t){return n<<t|n>>>32-t}function N(n,t){return n>>>t|n<<32-t}function W(n,t){return n>>>t}function tt(n,t,e){return n^t^e}function nt(n,t,e){return n&t^~n&e}function et(n,t,e){return n&t^n&e^t&e}function Rt(n){return N(n,2)^N(n,13)^N(n,22)}function d(n,t){const e=(65535&n)+(65535&t);return(65535&(n>>>16)+(t>>>16)+(e>>>16))<<16|65535&e}function Tt(n,t,e,i){const s=(65535&n)+(65535&t)+(65535&e)+(65535&i);return(65535&(n>>>16)+(t>>>16)+(e>>>16)+(i>>>16)+(s>>>16))<<16|65535&s}function m(n,t,e,i,s){const r=(65535&n)+(65535&t)+(65535&e)+(65535&i)+(65535&s);return(65535&(n>>>16)+(t>>>16)+(e>>>16)+(i>>>16)+(s>>>16)+(r>>>16))<<16|65535&r}function Ut(n){return N(n,7)^N(n,18)^W(n,3)}function kt(n){return N(n,6)^N(n,11)^N(n,25)}function St(n){return[1732584193,4023233417,2562383102,271733878,3285377520]}function it(n,t){let e,i,s,r,o,f,a;const c=[];for(e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],a=0;a<80;a+=1)c[a]=a<16?n[a]:F(c[a-3]^c[a-8]^c[a-14]^c[a-16],1),f=a<20?m(F(e,5),nt(i,s,r),o,1518500249,c[a]):a<40?m(F(e,5),tt(i,s,r),o,1859775393,c[a]):a<60?m(F(e,5),et(i,s,r),o,2400959708,c[a]):m(F(e,5),tt(i,s,r),o,3395469782,c[a]),o=r,r=s,s=F(i,30),i=e,e=f;return t[0]=d(e,t[0]),t[1]=d(i,t[1]),t[2]=d(s,t[2]),t[3]=d(r,t[3]),t[4]=d(o,t[4]),t}function Ft(n,t,e,i){let s;const r=15+(t+65>>>9<<4),o=t+e;for(;n.length<=r;)n.push(0);for(n[t>>>5]|=128<<24-t%32,n[r]=4294967295&o,n[r-1]=o/4294967296|0,s=0;s<n.length;s+=16)i=it(n.slice(s,s+16),i);return i}class Ct extends O{constructor(t,e,i){if(t!=="SHA-1")throw new Error(M);super(t,e,i);const s=i||{};this.L=!0,this.T=this.k,this.K=-1,this.m=S(this.t,this.i,this.K),this.R=it,this.g=function(r){return r.slice()},this.B=St,this.F=Ft,this.C=[1732584193,4023233417,2562383102,271733878,3285377520],this.p=512,this.U=160,this.v=!1,s.hmacKey&&this.M(U("hmacKey",s.hmacKey,this.K))}}function st(n){let t;return t=n=="SHA-224"?R.slice():T.slice(),t}function ut(n,t){let e,i,s,r,o,f,a,c,p,w,h;const A=[];for(e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],f=t[5],a=t[6],c=t[7],h=0;h<64;h+=1)A[h]=h<16?n[h]:Tt(N(g=A[h-2],17)^N(g,19)^W(g,10),A[h-7],Ut(A[h-15]),A[h-16]),p=m(c,kt(o),nt(o,f,a),l[h],A[h]),w=d(Rt(e),et(e,i,s)),c=a,a=f,f=o,o=d(r,p),r=s,s=i,i=e,e=d(p,w);var g;return t[0]=d(e,t[0]),t[1]=d(i,t[1]),t[2]=d(s,t[2]),t[3]=d(r,t[3]),t[4]=d(o,t[4]),t[5]=d(f,t[5]),t[6]=d(a,t[6]),t[7]=d(c,t[7]),t}class Mt extends O{constructor(t,e,i){if(t!=="SHA-224"&&t!=="SHA-256")throw new Error(M);super(t,e,i);const s=i||{};this.T=this.k,this.L=!0,this.K=-1,this.m=S(this.t,this.i,this.K),this.R=ut,this.g=function(r){return r.slice()},this.B=st,this.F=function(r,o,f,a){return function(c,p,w,h,A){let g,E;const Y=15+(p+65>>>9<<4),y=p+w;for(;c.length<=Y;)c.push(0);for(c[p>>>5]|=128<<24-p%32,c[Y]=4294967295&y,c[Y-1]=y/4294967296|0,g=0;g<c.length;g+=16)h=ut(c.slice(g,g+16),h);return E=A==="SHA-224"?[h[0],h[1],h[2],h[3],h[4],h[5],h[6]]:h,E}(r,o,f,a,t)},this.C=st(t),this.p=512,this.U=t==="SHA-224"?224:256,this.v=!1,s.hmacKey&&this.M(U("hmacKey",s.hmacKey,this.K))}}class u{constructor(t,e){this.Y=t,this.N=e}}function rt(n,t){let e;return t>32?(e=64-t,new u(n.N<<t|n.Y>>>e,n.Y<<t|n.N>>>e)):t!==0?(e=32-t,new u(n.Y<<t|n.N>>>e,n.N<<t|n.Y>>>e)):n}function K(n,t){let e;return t<32?(e=32-t,new u(n.Y>>>t|n.N<<e,n.N>>>t|n.Y<<e)):(e=64-t,new u(n.N>>>t|n.Y<<e,n.Y>>>t|n.N<<e))}function ot(n,t){return new u(n.Y>>>t,n.N>>>t|n.Y<<32-t)}function mt(n,t,e){return new u(n.Y&t.Y^n.Y&e.Y^t.Y&e.Y,n.N&t.N^n.N&e.N^t.N&e.N)}function Dt(n){const t=K(n,28),e=K(n,34),i=K(n,39);return new u(t.Y^e.Y^i.Y,t.N^e.N^i.N)}function H(n,t){let e,i;e=(65535&n.N)+(65535&t.N),i=(n.N>>>16)+(t.N>>>16)+(e>>>16);const s=(65535&i)<<16|65535&e;return e=(65535&n.Y)+(65535&t.Y)+(i>>>16),i=(n.Y>>>16)+(t.Y>>>16)+(e>>>16),new u((65535&i)<<16|65535&e,s)}function Pt(n,t,e,i){let s,r;s=(65535&n.N)+(65535&t.N)+(65535&e.N)+(65535&i.N),r=(n.N>>>16)+(t.N>>>16)+(e.N>>>16)+(i.N>>>16)+(s>>>16);const o=(65535&r)<<16|65535&s;return s=(65535&n.Y)+(65535&t.Y)+(65535&e.Y)+(65535&i.Y)+(r>>>16),r=(n.Y>>>16)+(t.Y>>>16)+(e.Y>>>16)+(i.Y>>>16)+(s>>>16),new u((65535&r)<<16|65535&s,o)}function It(n,t,e,i,s){let r,o;r=(65535&n.N)+(65535&t.N)+(65535&e.N)+(65535&i.N)+(65535&s.N),o=(n.N>>>16)+(t.N>>>16)+(e.N>>>16)+(i.N>>>16)+(s.N>>>16)+(r>>>16);const f=(65535&o)<<16|65535&r;return r=(65535&n.Y)+(65535&t.Y)+(65535&e.Y)+(65535&i.Y)+(65535&s.Y)+(o>>>16),o=(n.Y>>>16)+(t.Y>>>16)+(e.Y>>>16)+(i.Y>>>16)+(s.Y>>>16)+(r>>>16),new u((65535&o)<<16|65535&r,f)}function D(n,t){return new u(n.Y^t.Y,n.N^t.N)}function $t(n){const t=K(n,19),e=K(n,61),i=ot(n,6);return new u(t.Y^e.Y^i.Y,t.N^e.N^i.N)}function _t(n){const t=K(n,1),e=K(n,8),i=ot(n,7);return new u(t.Y^e.Y^i.Y,t.N^e.N^i.N)}function Ot(n){const t=K(n,14),e=K(n,18),i=K(n,41);return new u(t.Y^e.Y^i.Y,t.N^e.N^i.N)}const Xt=[new u(l[0],3609767458),new u(l[1],602891725),new u(l[2],3964484399),new u(l[3],2173295548),new u(l[4],4081628472),new u(l[5],3053834265),new u(l[6],2937671579),new u(l[7],3664609560),new u(l[8],2734883394),new u(l[9],1164996542),new u(l[10],1323610764),new u(l[11],3590304994),new u(l[12],4068182383),new u(l[13],991336113),new u(l[14],633803317),new u(l[15],3479774868),new u(l[16],2666613458),new u(l[17],944711139),new u(l[18],2341262773),new u(l[19],2007800933),new u(l[20],1495990901),new u(l[21],1856431235),new u(l[22],3175218132),new u(l[23],2198950837),new u(l[24],3999719339),new u(l[25],766784016),new u(l[26],2566594879),new u(l[27],3203337956),new u(l[28],1034457026),new u(l[29],2466948901),new u(l[30],3758326383),new u(l[31],168717936),new u(l[32],1188179964),new u(l[33],1546045734),new u(l[34],1522805485),new u(l[35],2643833823),new u(l[36],2343527390),new u(l[37],1014477480),new u(l[38],1206759142),new u(l[39],344077627),new u(l[40],1290863460),new u(l[41],3158454273),new u(l[42],3505952657),new u(l[43],106217008),new u(l[44],3606008344),new u(l[45],1432725776),new u(l[46],1467031594),new u(l[47],851169720),new u(l[48],3100823752),new u(l[49],1363258195),new u(l[50],3750685593),new u(l[51],3785050280),new u(l[52],3318307427),new u(l[53],3812723403),new u(l[54],2003034995),new u(l[55],3602036899),new u(l[56],1575990012),new u(l[57],1125592928),new u(l[58],2716904306),new u(l[59],442776044),new u(l[60],593698344),new u(l[61],3733110249),new u(l[62],2999351573),new u(l[63],3815920427),new u(3391569614,3928383900),new u(3515267271,566280711),new u(3940187606,3454069534),new u(4118630271,4000239992),new u(116418474,1914138554),new u(174292421,2731055270),new u(289380356,3203993006),new u(460393269,320620315),new u(685471733,587496836),new u(852142971,1086792851),new u(1017036298,365543100),new u(1126000580,2618297676),new u(1288033470,3409855158),new u(1501505948,4234509866),new u(1607167915,987167468),new u(1816402316,1246189591)];function ht(n){return n==="SHA-384"?[new u(3418070365,R[0]),new u(1654270250,R[1]),new u(2438529370,R[2]),new u(355462360,R[3]),new u(1731405415,R[4]),new u(41048885895,R[5]),new u(3675008525,R[6]),new u(1203062813,R[7])]:[new u(T[0],4089235720),new u(T[1],2227873595),new u(T[2],4271175723),new u(T[3],1595750129),new u(T[4],2917565137),new u(T[5],725511199),new u(T[6],4215389547),new u(T[7],327033209)]}function at(n,t){let e,i,s,r,o,f,a,c,p,w,h,A;const g=[];for(e=t[0],i=t[1],s=t[2],r=t[3],o=t[4],f=t[5],a=t[6],c=t[7],h=0;h<80;h+=1)h<16?(A=2*h,g[h]=new u(n[A],n[A+1])):g[h]=Pt($t(g[h-2]),g[h-7],_t(g[h-15]),g[h-16]),p=It(c,Ot(o),(Y=f,y=a,new u((E=o).Y&Y.Y^~E.Y&y.Y,E.N&Y.N^~E.N&y.N)),Xt[h],g[h]),w=H(Dt(e),mt(e,i,s)),c=a,a=f,f=o,o=H(r,p),r=s,s=i,i=e,e=H(p,w);var E,Y,y;return t[0]=H(e,t[0]),t[1]=H(i,t[1]),t[2]=H(s,t[2]),t[3]=H(r,t[3]),t[4]=H(o,t[4]),t[5]=H(f,t[5]),t[6]=H(a,t[6]),t[7]=H(c,t[7]),t}class xt extends O{constructor(t,e,i){if(t!=="SHA-384"&&t!=="SHA-512")throw new Error(M);super(t,e,i);const s=i||{};this.T=this.k,this.L=!0,this.K=-1,this.m=S(this.t,this.i,this.K),this.R=at,this.g=function(r){return r.slice()},this.B=ht,this.F=function(r,o,f,a){return function(c,p,w,h,A){let g,E;const Y=31+(p+129>>>10<<5),y=p+w;for(;c.length<=Y;)c.push(0);for(c[p>>>5]|=128<<24-p%32,c[Y]=4294967295&y,c[Y-1]=y/4294967296|0,g=0;g<c.length;g+=32)h=at(c.slice(g,g+32),h);return E=A==="SHA-384"?[(h=h)[0].Y,h[0].N,h[1].Y,h[1].N,h[2].Y,h[2].N,h[3].Y,h[3].N,h[4].Y,h[4].N,h[5].Y,h[5].N]:[h[0].Y,h[0].N,h[1].Y,h[1].N,h[2].Y,h[2].N,h[3].Y,h[3].N,h[4].Y,h[4].N,h[5].Y,h[5].N,h[6].Y,h[6].N,h[7].Y,h[7].N],E}(r,o,f,a,t)},this.C=ht(t),this.p=1024,this.U=t==="SHA-384"?384:512,this.v=!1,s.hmacKey&&this.M(U("hmacKey",s.hmacKey,this.K))}}const zt=[new u(0,1),new u(0,32898),new u(2147483648,32906),new u(2147483648,2147516416),new u(0,32907),new u(0,2147483649),new u(2147483648,2147516545),new u(2147483648,32777),new u(0,138),new u(0,136),new u(0,2147516425),new u(0,2147483658),new u(0,2147516555),new u(2147483648,139),new u(2147483648,32905),new u(2147483648,32771),new u(2147483648,32770),new u(2147483648,128),new u(0,32778),new u(2147483648,2147483658),new u(2147483648,2147516545),new u(2147483648,32896),new u(0,2147483649),new u(2147483648,2147516424)],jt=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function z(n){let t;const e=[];for(t=0;t<5;t+=1)e[t]=[new u(0,0),new u(0,0),new u(0,0),new u(0,0),new u(0,0)];return e}function Gt(n){let t;const e=[];for(t=0;t<5;t+=1)e[t]=n[t].slice();return e}function X(n,t){let e,i,s,r;const o=[],f=[];if(n!==null)for(i=0;i<n.length;i+=2)t[(i>>>1)%5][(i>>>1)/5|0]=D(t[(i>>>1)%5][(i>>>1)/5|0],new u(n[i+1],n[i]));for(e=0;e<24;e+=1){for(r=z(),i=0;i<5;i+=1)o[i]=(a=t[i][0],c=t[i][1],p=t[i][2],w=t[i][3],h=t[i][4],new u(a.Y^c.Y^p.Y^w.Y^h.Y,a.N^c.N^p.N^w.N^h.N));for(i=0;i<5;i+=1)f[i]=D(o[(i+4)%5],rt(o[(i+1)%5],1));for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)t[i][s]=D(t[i][s],f[i]);for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)r[s][(2*i+3*s)%5]=rt(t[i][s],jt[i][s]);for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)t[i][s]=D(r[i][s],new u(~r[(i+1)%5][s].Y&r[(i+2)%5][s].Y,~r[(i+1)%5][s].N&r[(i+2)%5][s].N));t[0][0]=D(t[0][0],zt[e])}var a,c,p,w,h;return t}function ct(n){let t,e,i=0;const s=[0,0],r=[4294967295&n,n/4294967296&2097151];for(t=6;t>=0;t--)e=r[t>>2]>>>8*t&255,e===0&&i===0||(s[i+1>>2]|=e<<8*(i+1),i+=1);return i=i!==0?i:1,s[0]|=i,{value:i+1>4?s:[s[0]],binLen:8+8*i}}function j(n){return _(ct(n.binLen),n)}function ft(n,t){let e,i=ct(t);i=_(i,n);const s=t>>>2,r=(s-i.value.length%s)%s;for(e=0;e<r;e++)i.value.push(0);return i.value}class Vt extends O{constructor(t,e,i){let s=6,r=0;super(t,e,i);const o=i||{};if(this.numRounds!==1){if(o.kmacKey||o.hmacKey)throw new Error("Cannot set numRounds with MAC");if(this.s==="CSHAKE128"||this.s==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.K=1,this.m=S(this.t,this.i,this.K),this.R=X,this.g=Gt,this.B=z,this.C=z(),this.v=!1,t){case"SHA3-224":this.p=r=1152,this.U=224,this.L=!0,this.T=this.k;break;case"SHA3-256":this.p=r=1088,this.U=256,this.L=!0,this.T=this.k;break;case"SHA3-384":this.p=r=832,this.U=384,this.L=!0,this.T=this.k;break;case"SHA3-512":this.p=r=576,this.U=512,this.L=!0,this.T=this.k;break;case"SHAKE128":s=31,this.p=r=1344,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"SHAKE256":s=31,this.p=r=1088,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"KMAC128":s=4,this.p=r=1344,this.I(i),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"KMAC256":s=4,this.p=r=1088,this.I(i),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"CSHAKE128":this.p=r=1344,s=this._(i),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"CSHAKE256":this.p=r=1088,s=this._(i),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;default:throw new Error(M)}this.F=function(f,a,c,p,w){return function(h,A,g,E,Y,y,B){let b,v,L=0;const C=[],$=Y>>>5,Yt=A>>>5;for(b=0;b<Yt&&A>=Y;b+=$)E=X(h.slice(b,b+$),E),A-=Y;for(h=h.slice(b),A%=Y;h.length<$;)h.push(0);for(b=A>>>3,h[b>>2]^=y<<b%4*8,h[$-1]^=2147483648,E=X(h,E);32*C.length<B&&(v=E[L%5][L/5|0],C.push(v.N),!(32*C.length>=B));)C.push(v.Y),L+=1,64*L%Y==0&&(X(null,E),L=0);return C}(f,a,0,p,r,s,w)},o.hmacKey&&this.M(U("hmacKey",o.hmacKey,this.K))}_(t,e){const i=function(r){const o=r||{};return{funcName:U("funcName",o.funcName,1,{value:[],binLen:0}),customization:U("Customization",o.customization,1,{value:[],binLen:0})}}(t||{});e&&(i.funcName=e);const s=_(j(i.funcName),j(i.customization));if(i.customization.binLen!==0||i.funcName.binLen!==0){const r=ft(s,this.p>>>3);for(let o=0;o<r.length;o+=this.p>>>5)this.C=this.R(r.slice(o,o+(this.p>>>5)),this.C),this.l+=this.p;return 4}return 31}I(t){const e=function(s){const r=s||{};return{kmacKey:U("kmacKey",r.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:U("Customization",r.customization,1,{value:[],binLen:0})}}(t||{});this._(t,e.funcName);const i=ft(j(e.kmacKey),this.p>>>3);for(let s=0;s<i.length;s+=this.p>>>5)this.C=this.R(i.slice(s,s+(this.p>>>5)),this.C),this.l+=this.p;this.A=!0}X(t){const e=_({value:this.o.slice(),binLen:this.h},function(i){let s,r,o=0;const f=[0,0],a=[4294967295&i,i/4294967296&2097151];for(s=6;s>=0;s--)r=a[s>>2]>>>8*s&255,r===0&&o===0||(f[o>>2]|=r<<8*o,o+=1);return o=o!==0?o:1,f[o>>2]|=o<<8*o,{value:o+1>4?f:[f[0]],binLen:8+8*o}}(t.outputLen));return this.F(e.value,e.binLen,this.l,this.g(this.C),t.outputLen)}}class qt{constructor(t,e,i){if(t=="SHA-1")this.O=new Ct(t,e,i);else if(t=="SHA-224"||t=="SHA-256")this.O=new Mt(t,e,i);else if(t=="SHA-384"||t=="SHA-512")this.O=new xt(t,e,i);else{if(t!="SHA3-224"&&t!="SHA3-256"&&t!="SHA3-384"&&t!="SHA3-512"&&t!="SHAKE128"&&t!="SHAKE256"&&t!="CSHAKE128"&&t!="CSHAKE256"&&t!="KMAC128"&&t!="KMAC256")throw new Error(M);this.O=new Vt(t,e,i)}}update(t){this.O.update(t)}getHash(t,e){return this.O.getHash(t,e)}setHMACKey(t,e,i){this.O.setHMACKey(t,e,i)}getHMAC(t,e){return this.O.getHMAC(t,e)}}const Jt="https://ptx.transportdata.tw/MOTC/v2/",Qt="Bike/Station/",Zt="Bike/Availability/",Wt="Cycling/Shape/",tn="Bike/Station/NearBy",nn="Bike/Availability/NearBy";function en(){let n="bcee97e768f0431784373e00f3539404",t="bAY5MKsU_isyBjPsnFHcHlJgd1k",e=new Date().toUTCString(),i=new qt("SHA-1","TEXT");i.setHMACKey(t,"TEXT"),i.update("x-date: "+e);let s=i.getHMAC("B64");return{Authorization:'hmac username="'+n+'", algorithm="hmac-sha1", headers="x-date", signature="'+s+'"',"X-Date":e}}function wt(n){return{StationUID:n.StationUID,StationName:{Zh_tw:n.StationName.Zh_tw},StationPosition:{PositionLon:n.StationPosition.PositionLon,PositionLat:n.StationPosition.PositionLat},StationAddress:{Zh_tw:n.StationAddress.Zh_tw}}}function lt(n){return{StationUID:n.StationUID,ServiceStatus:n.ServiceStatus,ServiceType:n.ServiceType,AvailableRentBikes:n.AvailableRentBikes,AvailableReturnBikes:n.AvailableReturnBikes}}function sn(n){return{RouteName:n.RouteName,AuthorityName:n.AuthorityName,CityCode:n.CityCode,City:n.City,Town:n.Town,RoadSectionStart:n.RoadSectionStart,RoadSectionEnd:n.RoadSectionEnd,Direction:n.Direction,CyclingLength:n.CyclingLength,FinishedTime:n.FinishedTime,UpdateTime:n.UpdateTime,Geometry:n.Geometry}}function un(n){return String(new globalThis.URL(n,Jt))}async function P(n,t){return fetch(un(n),{method:"GET",headers:en()}).then(e=>e.json()).then(e=>e.map(t,e)).then(Kt(console.log))}const I={getStationByCityName:(n,t,e)=>P(`${Qt}${n}?$top=30`,wt),getAvailabilityCityName:n=>P(`${Zt}${n}?$top=30`,lt),getCyclingShapeByCityName:n=>P(`${Wt}${n}`,sn),getNearByStation:(n,t)=>P(`${tn}?$spatialFilter=nearby(${n},${t},${500})`,wt),getNearByAvailability:(n,t)=>P(`${nn}?$spatialFilter=nearby(${n},${t},${500})`,lt)},on=yt({id:"bike",state:()=>({loading:!1,userLocation:[],bikeStations:[],bikeAvailability:[],bikeCyclingShape:[],bikeNearByStations:[],bikeNearByAvailability:[],selectedBikeStation:{},isRent:!0}),actions:{async getStationData(n,t,e){this.setLoading(!0);const i=await I.getStationByCityName(n,t,e);this.bikeStations=i,this.setLoading(!1)},async getAvailabilityData(n){this.setLoading(!0);const t=await I.getAvailabilityCityName(n);this.bikeAvailability=t,this.setLoading(!1)},async getCyclingShapeData(n){this.setLoading(!0);const t=await I.getCyclingShapeByCityName(n);this.bikeCyclingShape=t,this.setLoading(!1)},async getNearByStationData(n,t){this.setLoading(!0);const e=await I.getNearByStation(n,t);this.bikeNearByStations=e,this.setLoading(!1)},async getNearByAvailabilityData(n,t){this.setLoading(!0);const e=await I.getNearByAvailability(n,t);this.bikeNearByAvailability=e,this.setLoading(!1)},async setLoading(n){this.loading=n},setLocation(n,t){this.userLocation=[n,t]},setIsRent(n){this.isRent=n},setSelectedBikeStation(n){this.selectedBikeStation=n}},getters:{nearAvailability:n=>n.bikeAvailability.filter(t=>n.bikeStations.find(e=>e.StationUID===t.StationUID)),getUserLocation:n=>n.userLocation,getAvailability:n=>n.bikeAvailability,getCyclingShape:n=>n.bikeCyclingShape,getNearByStations:n=>n.bikeNearByStations,getNearByAvailability:n=>n.bikeNearByAvailability,getSelectedBikeStation:n=>n.selectedBikeStation,getIsRent:n=>n.isRent,getHasLocation:n=>Boolean(n.userLocation[0])}});var pt;(function(n){n.Chiayi="Chiayi",n.Hsinchu="Hsinchu",n.Kaohsiung="Kaohsiung",n.KinmenCounty="KinmenCounty",n.MiaoliCounty="MiaoliCounty",n.NewTaipei="NewTaipei",n.PingtungCounty="PingtungCounty",n.Taichung="Taichung",n.Tainan="Tainan",n.Taipei="Taipei",n.Taoyuan="Taoyuan"})(pt||(pt={}));var gt;(function(n){n.Chiayi="\u5609\u7FA9\u5E02",n.Hsinchu="\u65B0\u7AF9\u5E02",n.Kaohsiung="\u9AD8\u96C4\u5E02",n.KinmenCounty="\u91D1\u9580\u7E23",n.MiaoliCounty="\u82D7\u6817\u7E23",n.NewTaipei="\u65B0\u5317\u5E02",n.PingtungCounty="\u5C4F\u6771\u7E23",n.Taichung="\u81FA\u4E2D\u5E02",n.Tainan="\u81FA\u5357\u5E02",n.Taipei="\u81FA\u5317\u5E02",n.Taoyuan="\u6843\u5712\u5E02"})(gt||(gt={}));var At;(function(n){n.ChanghuaCounty="ChanghuaCounty",n.Chiayi="Chiayi",n.ChiayiCounty="ChiayiCounty",n.Hsinchu="Hsinchu",n.HsinchuCounty="HsinchuCounty",n.HualienCounty="HualienCounty",n.Kaohsiung="Kaohsiung",n.Keelung="Keelung",n.KinmenCounty="KinmenCounty",n.LienchiangCounty="LienchiangCounty",n.MiaoliCounty="MiaoliCounty",n.NantouCounty="NantouCounty",n.NewTaipei="NewTaipei",n.PenghuCounty="PenghuCounty",n.PingtungCounty="PingtungCounty",n.Taichung="Taichung",n.Tainan="Tainan",n.Taipei="Taipei",n.TaitungCounty="TaitungCounty",n.Taoyuan="Taoyuan",n.YilanCounty="YilanCounty",n.YunlinCounty="YunlinCounty"})(At||(At={}));var Et;(function(n){n.ChanghuaCounty="\u5F70\u5316\u7E23",n.Chiayi="\u5609\u7FA9\u5E02",n.ChiayiCounty="\u5609\u7FA9\u7E23",n.Hsinchu="\u65B0\u7AF9\u5E02",n.HsinchuCounty="\u65B0\u7AF9\u7E23",n.HualienCounty="\u82B1\u84EE\u7E23",n.Kaohsiung="\u9AD8\u96C4\u5E02",n.Keelung="\u57FA\u9686\u5E02",n.KinmenCounty="\u91D1\u9580\u7E23",n.LienchiangCounty="\u9023\u6C5F\u7E23",n.MiaoliCounty="\u82D7\u6817\u7E23",n.NantouCounty="\u5357\u6295\u7E23",n.NewTaipei="\u65B0\u5317\u5E02",n.PenghuCounty="\u6F8E\u6E56\u7E23",n.PingtungCounty="\u5C4F\u6771\u7E23",n.Taichung="\u81FA\u4E2D\u5E02",n.Tainan="\u81FA\u5357\u5E02",n.Taipei="\u81FA\u5317\u5E02",n.TaitungCounty="\u81FA\u6771\u7E23",n.Taoyuan="\u6843\u5712\u5E02",n.YilanCounty="\u5B9C\u862D\u7E23",n.YunlinCounty="\u96F2\u6797\u7E23"})(Et||(Et={}));const hn=n=>Object.values(n);export{At as C,pt as S,gt as a,Et as b,hn as g,on as u};
