import{z as Et}from"./vendor.88342a52.js";function C(e){return e!=null&&typeof e=="object"&&e["@@functional/placeholder"]===!0}function X(e){return function t(n){return arguments.length===0||C(n)?t:e.apply(this,arguments)}}function G(e){return function t(n,i){switch(arguments.length){case 0:return t;case 1:return C(n)?t:X(function(s){return e(n,s)});default:return C(n)&&C(i)?t:C(n)?X(function(s){return e(s,i)}):C(i)?X(function(s){return e(n,s)}):e(n,i)}}}var bt=Array.isArray||function(t){return t!=null&&t.length>=0&&Object.prototype.toString.call(t)==="[object Array]"};function Yt(e){return e!=null&&typeof e["@@transducer/step"]=="function"}function vt(e,t,n){return function(){if(arguments.length===0)return n();var i=Array.prototype.slice.call(arguments,0),s=i.pop();if(!bt(s)){for(var r=0;r<e.length;){if(typeof s[e[r]]=="function")return s[e[r]].apply(s,i);r+=1}if(Yt(s)){var o=t.apply(null,i);return o(s)}}return n.apply(this,arguments)}}var V={init:function(){return this.xf["@@transducer/init"]()},result:function(e){return this.xf["@@transducer/result"](e)}},Lt=function(){function e(t,n){this.xf=n,this.f=t}return e.prototype["@@transducer/init"]=V.init,e.prototype["@@transducer/result"]=V.result,e.prototype["@@transducer/step"]=function(t,n){return this.f(n),this.xf["@@transducer/step"](t,n)},e}(),Bt=G(function(t,n){return new Lt(t,n)}),St=Bt,Ht=G(vt([],St,function(t,n){return t(n),n})),Nt=Ht;const q="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";function J(e,t,n,i){let s,r,o;const l=t||[0],h=(n=n||0)>>>3,c=i===-1?3:0;for(s=0;s<e.length;s+=1)o=s+h,r=o>>>2,l.length<=r&&l.push(0),l[r]|=e[s]<<8*(c+i*(o%4));return{value:l,binLen:8*e.length+n}}function K(e,t,n){switch(t){case"UTF8":case"UTF16BE":case"UTF16LE":break;default:throw new Error("encoding must be UTF8, UTF16BE, or UTF16LE")}switch(e){case"HEX":return function(i,s,r){return function(o,l,h,c){let p,f,a,A;if(o.length%2!=0)throw new Error("String of HEX type must be in byte increments");const g=l||[0],y=(h=h||0)>>>3,d=c===-1?3:0;for(p=0;p<o.length;p+=2){if(f=parseInt(o.substr(p,2),16),isNaN(f))throw new Error("String of HEX type contains invalid characters");for(A=(p>>>1)+y,a=A>>>2;g.length<=a;)g.push(0);g[a]|=f<<8*(d+c*(A%4))}return{value:g,binLen:4*o.length+h}}(i,s,r,n)};case"TEXT":return function(i,s,r){return function(o,l,h,c,p){let f,a,A,g,y,d,E,S,b=0;const v=h||[0],L=(c=c||0)>>>3;if(l==="UTF8")for(E=p===-1?3:0,A=0;A<o.length;A+=1)for(f=o.charCodeAt(A),a=[],128>f?a.push(f):2048>f?(a.push(192|f>>>6),a.push(128|63&f)):55296>f||57344<=f?a.push(224|f>>>12,128|f>>>6&63,128|63&f):(A+=1,f=65536+((1023&f)<<10|1023&o.charCodeAt(A)),a.push(240|f>>>18,128|f>>>12&63,128|f>>>6&63,128|63&f)),g=0;g<a.length;g+=1){for(d=b+L,y=d>>>2;v.length<=y;)v.push(0);v[y]|=a[g]<<8*(E+p*(d%4)),b+=1}else for(E=p===-1?2:0,S=l==="UTF16LE"&&p!==1||l!=="UTF16LE"&&p===1,A=0;A<o.length;A+=1){for(f=o.charCodeAt(A),S===!0&&(g=255&f,f=g<<8|f>>>8),d=b+L,y=d>>>2;v.length<=y;)v.push(0);v[y]|=f<<8*(E+p*(d%4)),b+=2}return{value:v,binLen:8*b+c}}(i,t,s,r,n)};case"B64":return function(i,s,r){return function(o,l,h,c){let p,f,a,A,g,y,d,E=0;const S=l||[0],b=(h=h||0)>>>3,v=c===-1?3:0,L=o.indexOf("=");if(o.search(/^[a-zA-Z0-9=+/]+$/)===-1)throw new Error("Invalid character in base-64 string");if(o=o.replace(/=/g,""),L!==-1&&L<o.length)throw new Error("Invalid '=' found in base-64 string");for(f=0;f<o.length;f+=4){for(g=o.substr(f,4),A=0,a=0;a<g.length;a+=1)p=q.indexOf(g.charAt(a)),A|=p<<18-6*a;for(a=0;a<g.length-1;a+=1){for(d=E+b,y=d>>>2;S.length<=y;)S.push(0);S[y]|=(A>>>16-8*a&255)<<8*(v+c*(d%4)),E+=1}}return{value:S,binLen:8*E+h}}(i,s,r,n)};case"BYTES":return function(i,s,r){return function(o,l,h,c){let p,f,a,A;const g=l||[0],y=(h=h||0)>>>3,d=c===-1?3:0;for(f=0;f<o.length;f+=1)p=o.charCodeAt(f),A=f+y,a=A>>>2,g.length<=a&&g.push(0),g[a]|=p<<8*(d+c*(A%4));return{value:g,binLen:8*o.length+h}}(i,s,r,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(i,s,r){return function(o,l,h,c){return J(new Uint8Array(o),l,h,c)}(i,s,r,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(i,s,r){return J(i,s,r,n)};default:throw new Error("format must be HEX, TEXT, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}function Q(e,t,n,i){switch(e){case"HEX":return function(s){return function(r,o,l,h){let c,p,f="";const a=o/8,A=l===-1?3:0;for(c=0;c<a;c+=1)p=r[c>>>2]>>>8*(A+l*(c%4)),f+="0123456789abcdef".charAt(p>>>4&15)+"0123456789abcdef".charAt(15&p);return h.outputUpper?f.toUpperCase():f}(s,t,n,i)};case"B64":return function(s){return function(r,o,l,h){let c,p,f,a,A,g="";const y=o/8,d=l===-1?3:0;for(c=0;c<y;c+=3)for(a=c+1<y?r[c+1>>>2]:0,A=c+2<y?r[c+2>>>2]:0,f=(r[c>>>2]>>>8*(d+l*(c%4))&255)<<16|(a>>>8*(d+l*((c+1)%4))&255)<<8|A>>>8*(d+l*((c+2)%4))&255,p=0;p<4;p+=1)g+=8*c+6*p<=o?q.charAt(f>>>6*(3-p)&63):h.b64Pad;return g}(s,t,n,i)};case"BYTES":return function(s){return function(r,o,l){let h,c,p="";const f=o/8,a=l===-1?3:0;for(h=0;h<f;h+=1)c=r[h>>>2]>>>8*(a+l*(h%4))&255,p+=String.fromCharCode(c);return p}(s,t,n)};case"ARRAYBUFFER":try{new ArrayBuffer(0)}catch{throw new Error("ARRAYBUFFER not supported by this environment")}return function(s){return function(r,o,l){let h;const c=o/8,p=new ArrayBuffer(c),f=new Uint8Array(p),a=l===-1?3:0;for(h=0;h<c;h+=1)f[h]=r[h>>>2]>>>8*(a+l*(h%4))&255;return p}(s,t,n)};case"UINT8ARRAY":try{new Uint8Array(0)}catch{throw new Error("UINT8ARRAY not supported by this environment")}return function(s){return function(r,o,l){let h;const c=o/8,p=l===-1?3:0,f=new Uint8Array(c);for(h=0;h<c;h+=1)f[h]=r[h>>>2]>>>8*(p+l*(h%4))&255;return f}(s,t,n)};default:throw new Error("format must be HEX, B64, BYTES, ARRAYBUFFER, or UINT8ARRAY")}}const w=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],k=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428],T=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],m="Chosen SHA variant is not supported";function _(e,t){let n,i;const s=e.binLen>>>3,r=t.binLen>>>3,o=s<<3,l=4-s<<3;if(s%4!=0){for(n=0;n<r;n+=4)i=s+n>>>2,e.value[i]|=t.value[n>>>2]<<o,e.value.push(0),e.value[i+1]|=t.value[n>>>2]>>>l;return(e.value.length<<2)-4>=r+s&&e.value.pop(),{value:e.value,binLen:e.binLen+t.binLen}}return{value:e.value.concat(t.value),binLen:e.binLen+t.binLen}}function Z(e){const t={outputUpper:!1,b64Pad:"=",outputLen:-1},n=e||{},i="Output length must be a multiple of 8";if(t.outputUpper=n.outputUpper||!1,n.b64Pad&&(t.b64Pad=n.b64Pad),n.outputLen){if(n.outputLen%8!=0)throw new Error(i);t.outputLen=n.outputLen}else if(n.shakeLen){if(n.shakeLen%8!=0)throw new Error(i);t.outputLen=n.shakeLen}if(typeof t.outputUpper!="boolean")throw new Error("Invalid outputUpper formatting option");if(typeof t.b64Pad!="string")throw new Error("Invalid b64Pad formatting option");return t}function R(e,t,n,i){const s=e+" must include a value and format";if(!t){if(!i)throw new Error(s);return i}if(t.value===void 0||!t.format)throw new Error(s);return K(t.format,t.encoding||"UTF8",n)(t.value)}class x{constructor(t,n,i){const s=i||{};if(this.t=n,this.i=s.encoding||"UTF8",this.numRounds=s.numRounds||1,isNaN(this.numRounds)||this.numRounds!==parseInt(this.numRounds,10)||1>this.numRounds)throw new Error("numRounds must a integer >= 1");this.s=t,this.o=[],this.h=0,this.u=!1,this.l=0,this.A=!1,this.H=[],this.S=[]}update(t){let n,i=0;const s=this.p>>>5,r=this.m(t,this.o,this.h),o=r.binLen,l=r.value,h=o>>>5;for(n=0;n<h;n+=s)i+this.p<=o&&(this.C=this.R(l.slice(n,n+s),this.C),i+=this.p);this.l+=i,this.o=l.slice(i>>>5),this.h=o%this.p,this.u=!0}getHash(t,n){let i,s,r=this.U;const o=Z(n);if(this.v){if(o.outputLen===-1)throw new Error("Output length must be specified in options");r=o.outputLen}const l=Q(t,r,this.K,o);if(this.A&&this.T)return l(this.T(o));for(s=this.F(this.o.slice(),this.h,this.l,this.g(this.C),r),i=1;i<this.numRounds;i+=1)this.v&&r%32!=0&&(s[s.length-1]&=16777215>>>24-r%32),s=this.F(s,r,0,this.B(this.s),r);return l(s)}setHMACKey(t,n,i){if(!this.L)throw new Error("Variant does not support HMAC");if(this.u)throw new Error("Cannot set MAC key after calling update");const s=K(n,(i||{}).encoding||"UTF8",this.K);this.M(s(t))}M(t){const n=this.p>>>3,i=n/4-1;let s;if(this.numRounds!==1)throw new Error("Cannot set numRounds with MAC");if(this.A)throw new Error("MAC key already set");for(n<t.binLen/8&&(t.value=this.F(t.value,t.binLen,0,this.B(this.s),this.U));t.value.length<=i;)t.value.push(0);for(s=0;s<=i;s+=1)this.H[s]=909522486^t.value[s],this.S[s]=1549556828^t.value[s];this.C=this.R(this.H,this.C),this.l=this.p,this.A=!0}getHMAC(t,n){const i=Z(n);return Q(t,this.U,this.K,i)(this.k())}k(){let t;if(!this.A)throw new Error("Cannot call getHMAC without first setting MAC key");const n=this.F(this.o.slice(),this.h,this.l,this.g(this.C),this.U);return t=this.R(this.S,this.B(this.s)),t=this.F(n,this.U,this.p,t,this.U),t}}function U(e,t){return e<<t|e>>>32-t}function H(e,t){return e>>>t|e<<32-t}function W(e,t){return e>>>t}function tt(e,t,n){return e^t^n}function et(e,t,n){return e&t^~e&n}function nt(e,t,n){return e&t^e&n^t&n}function kt(e){return H(e,2)^H(e,13)^H(e,22)}function Y(e,t){const n=(65535&e)+(65535&t);return(65535&(e>>>16)+(t>>>16)+(n>>>16))<<16|65535&n}function Tt(e,t,n,i){const s=(65535&e)+(65535&t)+(65535&n)+(65535&i);return(65535&(e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(s>>>16))<<16|65535&s}function M(e,t,n,i,s){const r=(65535&e)+(65535&t)+(65535&n)+(65535&i)+(65535&s);return(65535&(e>>>16)+(t>>>16)+(n>>>16)+(i>>>16)+(s>>>16)+(r>>>16))<<16|65535&r}function Rt(e){return H(e,7)^H(e,18)^W(e,3)}function Ct(e){return H(e,6)^H(e,11)^H(e,25)}function Kt(e){return[1732584193,4023233417,2562383102,271733878,3285377520]}function it(e,t){let n,i,s,r,o,l,h;const c=[];for(n=t[0],i=t[1],s=t[2],r=t[3],o=t[4],h=0;h<80;h+=1)c[h]=h<16?e[h]:U(c[h-3]^c[h-8]^c[h-14]^c[h-16],1),l=h<20?M(U(n,5),et(i,s,r),o,1518500249,c[h]):h<40?M(U(n,5),tt(i,s,r),o,1859775393,c[h]):h<60?M(U(n,5),nt(i,s,r),o,2400959708,c[h]):M(U(n,5),tt(i,s,r),o,3395469782,c[h]),o=r,r=s,s=U(i,30),i=n,n=l;return t[0]=Y(n,t[0]),t[1]=Y(i,t[1]),t[2]=Y(s,t[2]),t[3]=Y(r,t[3]),t[4]=Y(o,t[4]),t}function Ut(e,t,n,i){let s;const r=15+(t+65>>>9<<4),o=t+n;for(;e.length<=r;)e.push(0);for(e[t>>>5]|=128<<24-t%32,e[r]=4294967295&o,e[r-1]=o/4294967296|0,s=0;s<e.length;s+=16)i=it(e.slice(s,s+16),i);return i}class Ft extends x{constructor(t,n,i){if(t!=="SHA-1")throw new Error(m);super(t,n,i);const s=i||{};this.L=!0,this.T=this.k,this.K=-1,this.m=K(this.t,this.i,this.K),this.R=it,this.g=function(r){return r.slice()},this.B=Kt,this.F=Ut,this.C=[1732584193,4023233417,2562383102,271733878,3285377520],this.p=512,this.U=160,this.v=!1,s.hmacKey&&this.M(R("hmacKey",s.hmacKey,this.K))}}function st(e){let t;return t=e=="SHA-224"?k.slice():T.slice(),t}function ut(e,t){let n,i,s,r,o,l,h,c,p,f,a;const A=[];for(n=t[0],i=t[1],s=t[2],r=t[3],o=t[4],l=t[5],h=t[6],c=t[7],a=0;a<64;a+=1)A[a]=a<16?e[a]:Tt(H(g=A[a-2],17)^H(g,19)^W(g,10),A[a-7],Rt(A[a-15]),A[a-16]),p=M(c,Ct(o),et(o,l,h),w[a],A[a]),f=Y(kt(n),nt(n,i,s)),c=h,h=l,l=o,o=Y(r,p),r=s,s=i,i=n,n=Y(p,f);var g;return t[0]=Y(n,t[0]),t[1]=Y(i,t[1]),t[2]=Y(s,t[2]),t[3]=Y(r,t[3]),t[4]=Y(o,t[4]),t[5]=Y(l,t[5]),t[6]=Y(h,t[6]),t[7]=Y(c,t[7]),t}class mt extends x{constructor(t,n,i){if(t!=="SHA-224"&&t!=="SHA-256")throw new Error(m);super(t,n,i);const s=i||{};this.T=this.k,this.L=!0,this.K=-1,this.m=K(this.t,this.i,this.K),this.R=ut,this.g=function(r){return r.slice()},this.B=st,this.F=function(r,o,l,h){return function(c,p,f,a,A){let g,y;const d=15+(p+65>>>9<<4),E=p+f;for(;c.length<=d;)c.push(0);for(c[p>>>5]|=128<<24-p%32,c[d]=4294967295&E,c[d-1]=E/4294967296|0,g=0;g<c.length;g+=16)a=ut(c.slice(g,g+16),a);return y=A==="SHA-224"?[a[0],a[1],a[2],a[3],a[4],a[5],a[6]]:a,y}(r,o,l,h,t)},this.C=st(t),this.p=512,this.U=t==="SHA-224"?224:256,this.v=!1,s.hmacKey&&this.M(R("hmacKey",s.hmacKey,this.K))}}class u{constructor(t,n){this.Y=t,this.N=n}}function rt(e,t){let n;return t>32?(n=64-t,new u(e.N<<t|e.Y>>>n,e.Y<<t|e.N>>>n)):t!==0?(n=32-t,new u(e.Y<<t|e.N>>>n,e.N<<t|e.Y>>>n)):e}function N(e,t){let n;return t<32?(n=32-t,new u(e.Y>>>t|e.N<<n,e.N>>>t|e.Y<<n)):(n=64-t,new u(e.N>>>t|e.Y<<n,e.Y>>>t|e.N<<n))}function ot(e,t){return new u(e.Y>>>t,e.N>>>t|e.Y<<32-t)}function Mt(e,t,n){return new u(e.Y&t.Y^e.Y&n.Y^t.Y&n.Y,e.N&t.N^e.N&n.N^t.N&n.N)}function Dt(e){const t=N(e,28),n=N(e,34),i=N(e,39);return new u(t.Y^n.Y^i.Y,t.N^n.N^i.N)}function B(e,t){let n,i;n=(65535&e.N)+(65535&t.N),i=(e.N>>>16)+(t.N>>>16)+(n>>>16);const s=(65535&i)<<16|65535&n;return n=(65535&e.Y)+(65535&t.Y)+(i>>>16),i=(e.Y>>>16)+(t.Y>>>16)+(n>>>16),new u((65535&i)<<16|65535&n,s)}function It(e,t,n,i){let s,r;s=(65535&e.N)+(65535&t.N)+(65535&n.N)+(65535&i.N),r=(e.N>>>16)+(t.N>>>16)+(n.N>>>16)+(i.N>>>16)+(s>>>16);const o=(65535&r)<<16|65535&s;return s=(65535&e.Y)+(65535&t.Y)+(65535&n.Y)+(65535&i.Y)+(r>>>16),r=(e.Y>>>16)+(t.Y>>>16)+(n.Y>>>16)+(i.Y>>>16)+(s>>>16),new u((65535&r)<<16|65535&s,o)}function Pt(e,t,n,i,s){let r,o;r=(65535&e.N)+(65535&t.N)+(65535&n.N)+(65535&i.N)+(65535&s.N),o=(e.N>>>16)+(t.N>>>16)+(n.N>>>16)+(i.N>>>16)+(s.N>>>16)+(r>>>16);const l=(65535&o)<<16|65535&r;return r=(65535&e.Y)+(65535&t.Y)+(65535&n.Y)+(65535&i.Y)+(65535&s.Y)+(o>>>16),o=(e.Y>>>16)+(t.Y>>>16)+(n.Y>>>16)+(i.Y>>>16)+(s.Y>>>16)+(r>>>16),new u((65535&o)<<16|65535&r,l)}function D(e,t){return new u(e.Y^t.Y,e.N^t.N)}function $t(e){const t=N(e,19),n=N(e,61),i=ot(e,6);return new u(t.Y^n.Y^i.Y,t.N^n.N^i.N)}function _t(e){const t=N(e,1),n=N(e,8),i=ot(e,7);return new u(t.Y^n.Y^i.Y,t.N^n.N^i.N)}function xt(e){const t=N(e,14),n=N(e,18),i=N(e,41);return new u(t.Y^n.Y^i.Y,t.N^n.N^i.N)}const Ot=[new u(w[0],3609767458),new u(w[1],602891725),new u(w[2],3964484399),new u(w[3],2173295548),new u(w[4],4081628472),new u(w[5],3053834265),new u(w[6],2937671579),new u(w[7],3664609560),new u(w[8],2734883394),new u(w[9],1164996542),new u(w[10],1323610764),new u(w[11],3590304994),new u(w[12],4068182383),new u(w[13],991336113),new u(w[14],633803317),new u(w[15],3479774868),new u(w[16],2666613458),new u(w[17],944711139),new u(w[18],2341262773),new u(w[19],2007800933),new u(w[20],1495990901),new u(w[21],1856431235),new u(w[22],3175218132),new u(w[23],2198950837),new u(w[24],3999719339),new u(w[25],766784016),new u(w[26],2566594879),new u(w[27],3203337956),new u(w[28],1034457026),new u(w[29],2466948901),new u(w[30],3758326383),new u(w[31],168717936),new u(w[32],1188179964),new u(w[33],1546045734),new u(w[34],1522805485),new u(w[35],2643833823),new u(w[36],2343527390),new u(w[37],1014477480),new u(w[38],1206759142),new u(w[39],344077627),new u(w[40],1290863460),new u(w[41],3158454273),new u(w[42],3505952657),new u(w[43],106217008),new u(w[44],3606008344),new u(w[45],1432725776),new u(w[46],1467031594),new u(w[47],851169720),new u(w[48],3100823752),new u(w[49],1363258195),new u(w[50],3750685593),new u(w[51],3785050280),new u(w[52],3318307427),new u(w[53],3812723403),new u(w[54],2003034995),new u(w[55],3602036899),new u(w[56],1575990012),new u(w[57],1125592928),new u(w[58],2716904306),new u(w[59],442776044),new u(w[60],593698344),new u(w[61],3733110249),new u(w[62],2999351573),new u(w[63],3815920427),new u(3391569614,3928383900),new u(3515267271,566280711),new u(3940187606,3454069534),new u(4118630271,4000239992),new u(116418474,1914138554),new u(174292421,2731055270),new u(289380356,3203993006),new u(460393269,320620315),new u(685471733,587496836),new u(852142971,1086792851),new u(1017036298,365543100),new u(1126000580,2618297676),new u(1288033470,3409855158),new u(1501505948,4234509866),new u(1607167915,987167468),new u(1816402316,1246189591)];function at(e){return e==="SHA-384"?[new u(3418070365,k[0]),new u(1654270250,k[1]),new u(2438529370,k[2]),new u(355462360,k[3]),new u(1731405415,k[4]),new u(41048885895,k[5]),new u(3675008525,k[6]),new u(1203062813,k[7])]:[new u(T[0],4089235720),new u(T[1],2227873595),new u(T[2],4271175723),new u(T[3],1595750129),new u(T[4],2917565137),new u(T[5],725511199),new u(T[6],4215389547),new u(T[7],327033209)]}function ht(e,t){let n,i,s,r,o,l,h,c,p,f,a,A;const g=[];for(n=t[0],i=t[1],s=t[2],r=t[3],o=t[4],l=t[5],h=t[6],c=t[7],a=0;a<80;a+=1)a<16?(A=2*a,g[a]=new u(e[A],e[A+1])):g[a]=It($t(g[a-2]),g[a-7],_t(g[a-15]),g[a-16]),p=Pt(c,xt(o),(d=l,E=h,new u((y=o).Y&d.Y^~y.Y&E.Y,y.N&d.N^~y.N&E.N)),Ot[a],g[a]),f=B(Dt(n),Mt(n,i,s)),c=h,h=l,l=o,o=B(r,p),r=s,s=i,i=n,n=B(p,f);var y,d,E;return t[0]=B(n,t[0]),t[1]=B(i,t[1]),t[2]=B(s,t[2]),t[3]=B(r,t[3]),t[4]=B(o,t[4]),t[5]=B(l,t[5]),t[6]=B(h,t[6]),t[7]=B(c,t[7]),t}class Xt extends x{constructor(t,n,i){if(t!=="SHA-384"&&t!=="SHA-512")throw new Error(m);super(t,n,i);const s=i||{};this.T=this.k,this.L=!0,this.K=-1,this.m=K(this.t,this.i,this.K),this.R=ht,this.g=function(r){return r.slice()},this.B=at,this.F=function(r,o,l,h){return function(c,p,f,a,A){let g,y;const d=31+(p+129>>>10<<5),E=p+f;for(;c.length<=d;)c.push(0);for(c[p>>>5]|=128<<24-p%32,c[d]=4294967295&E,c[d-1]=E/4294967296|0,g=0;g<c.length;g+=32)a=ht(c.slice(g,g+32),a);return y=A==="SHA-384"?[(a=a)[0].Y,a[0].N,a[1].Y,a[1].N,a[2].Y,a[2].N,a[3].Y,a[3].N,a[4].Y,a[4].N,a[5].Y,a[5].N]:[a[0].Y,a[0].N,a[1].Y,a[1].N,a[2].Y,a[2].N,a[3].Y,a[3].N,a[4].Y,a[4].N,a[5].Y,a[5].N,a[6].Y,a[6].N,a[7].Y,a[7].N],y}(r,o,l,h,t)},this.C=at(t),this.p=1024,this.U=t==="SHA-384"?384:512,this.v=!1,s.hmacKey&&this.M(R("hmacKey",s.hmacKey,this.K))}}const zt=[new u(0,1),new u(0,32898),new u(2147483648,32906),new u(2147483648,2147516416),new u(0,32907),new u(0,2147483649),new u(2147483648,2147516545),new u(2147483648,32777),new u(0,138),new u(0,136),new u(0,2147516425),new u(0,2147483658),new u(0,2147516555),new u(2147483648,139),new u(2147483648,32905),new u(2147483648,32771),new u(2147483648,32770),new u(2147483648,128),new u(0,32778),new u(2147483648,2147483658),new u(2147483648,2147516545),new u(2147483648,32896),new u(0,2147483649),new u(2147483648,2147516424)],jt=[[0,36,3,41,18],[1,44,10,45,2],[62,6,43,15,61],[28,55,25,21,56],[27,20,39,8,14]];function z(e){let t;const n=[];for(t=0;t<5;t+=1)n[t]=[new u(0,0),new u(0,0),new u(0,0),new u(0,0),new u(0,0)];return n}function Gt(e){let t;const n=[];for(t=0;t<5;t+=1)n[t]=e[t].slice();return n}function O(e,t){let n,i,s,r;const o=[],l=[];if(e!==null)for(i=0;i<e.length;i+=2)t[(i>>>1)%5][(i>>>1)/5|0]=D(t[(i>>>1)%5][(i>>>1)/5|0],new u(e[i+1],e[i]));for(n=0;n<24;n+=1){for(r=z(),i=0;i<5;i+=1)o[i]=(h=t[i][0],c=t[i][1],p=t[i][2],f=t[i][3],a=t[i][4],new u(h.Y^c.Y^p.Y^f.Y^a.Y,h.N^c.N^p.N^f.N^a.N));for(i=0;i<5;i+=1)l[i]=D(o[(i+4)%5],rt(o[(i+1)%5],1));for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)t[i][s]=D(t[i][s],l[i]);for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)r[s][(2*i+3*s)%5]=rt(t[i][s],jt[i][s]);for(i=0;i<5;i+=1)for(s=0;s<5;s+=1)t[i][s]=D(r[i][s],new u(~r[(i+1)%5][s].Y&r[(i+2)%5][s].Y,~r[(i+1)%5][s].N&r[(i+2)%5][s].N));t[0][0]=D(t[0][0],zt[n])}var h,c,p,f,a;return t}function ct(e){let t,n,i=0;const s=[0,0],r=[4294967295&e,e/4294967296&2097151];for(t=6;t>=0;t--)n=r[t>>2]>>>8*t&255,n===0&&i===0||(s[i+1>>2]|=n<<8*(i+1),i+=1);return i=i!==0?i:1,s[0]|=i,{value:i+1>4?s:[s[0]],binLen:8+8*i}}function j(e){return _(ct(e.binLen),e)}function lt(e,t){let n,i=ct(t);i=_(i,e);const s=t>>>2,r=(s-i.value.length%s)%s;for(n=0;n<r;n++)i.value.push(0);return i.value}class Vt extends x{constructor(t,n,i){let s=6,r=0;super(t,n,i);const o=i||{};if(this.numRounds!==1){if(o.kmacKey||o.hmacKey)throw new Error("Cannot set numRounds with MAC");if(this.s==="CSHAKE128"||this.s==="CSHAKE256")throw new Error("Cannot set numRounds for CSHAKE variants")}switch(this.K=1,this.m=K(this.t,this.i,this.K),this.R=O,this.g=Gt,this.B=z,this.C=z(),this.v=!1,t){case"SHA3-224":this.p=r=1152,this.U=224,this.L=!0,this.T=this.k;break;case"SHA3-256":this.p=r=1088,this.U=256,this.L=!0,this.T=this.k;break;case"SHA3-384":this.p=r=832,this.U=384,this.L=!0,this.T=this.k;break;case"SHA3-512":this.p=r=576,this.U=512,this.L=!0,this.T=this.k;break;case"SHAKE128":s=31,this.p=r=1344,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"SHAKE256":s=31,this.p=r=1088,this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"KMAC128":s=4,this.p=r=1344,this.I(i),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"KMAC256":s=4,this.p=r=1088,this.I(i),this.U=-1,this.v=!0,this.L=!1,this.T=this.X;break;case"CSHAKE128":this.p=r=1344,s=this._(i),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;case"CSHAKE256":this.p=r=1088,s=this._(i),this.U=-1,this.v=!0,this.L=!1,this.T=null;break;default:throw new Error(m)}this.F=function(l,h,c,p,f){return function(a,A,g,y,d,E,S){let b,v,L=0;const F=[],$=d>>>5,dt=A>>>5;for(b=0;b<dt&&A>=d;b+=$)y=O(a.slice(b,b+$),y),A-=d;for(a=a.slice(b),A%=d;a.length<$;)a.push(0);for(b=A>>>3,a[b>>2]^=E<<b%4*8,a[$-1]^=2147483648,y=O(a,y);32*F.length<S&&(v=y[L%5][L/5|0],F.push(v.N),!(32*F.length>=S));)F.push(v.Y),L+=1,64*L%d==0&&(O(null,y),L=0);return F}(l,h,0,p,r,s,f)},o.hmacKey&&this.M(R("hmacKey",o.hmacKey,this.K))}_(t,n){const i=function(r){const o=r||{};return{funcName:R("funcName",o.funcName,1,{value:[],binLen:0}),customization:R("Customization",o.customization,1,{value:[],binLen:0})}}(t||{});n&&(i.funcName=n);const s=_(j(i.funcName),j(i.customization));if(i.customization.binLen!==0||i.funcName.binLen!==0){const r=lt(s,this.p>>>3);for(let o=0;o<r.length;o+=this.p>>>5)this.C=this.R(r.slice(o,o+(this.p>>>5)),this.C),this.l+=this.p;return 4}return 31}I(t){const n=function(s){const r=s||{};return{kmacKey:R("kmacKey",r.kmacKey,1),funcName:{value:[1128353099],binLen:32},customization:R("Customization",r.customization,1,{value:[],binLen:0})}}(t||{});this._(t,n.funcName);const i=lt(j(n.kmacKey),this.p>>>3);for(let s=0;s<i.length;s+=this.p>>>5)this.C=this.R(i.slice(s,s+(this.p>>>5)),this.C),this.l+=this.p;this.A=!0}X(t){const n=_({value:this.o.slice(),binLen:this.h},function(i){let s,r,o=0;const l=[0,0],h=[4294967295&i,i/4294967296&2097151];for(s=6;s>=0;s--)r=h[s>>2]>>>8*s&255,r===0&&o===0||(l[o>>2]|=r<<8*o,o+=1);return o=o!==0?o:1,l[o>>2]|=o<<8*o,{value:o+1>4?l:[l[0]],binLen:8+8*o}}(t.outputLen));return this.F(n.value,n.binLen,this.l,this.g(this.C),t.outputLen)}}class qt{constructor(t,n,i){if(t=="SHA-1")this.O=new Ft(t,n,i);else if(t=="SHA-224"||t=="SHA-256")this.O=new mt(t,n,i);else if(t=="SHA-384"||t=="SHA-512")this.O=new Xt(t,n,i);else{if(t!="SHA3-224"&&t!="SHA3-256"&&t!="SHA3-384"&&t!="SHA3-512"&&t!="SHAKE128"&&t!="SHAKE256"&&t!="CSHAKE128"&&t!="CSHAKE256"&&t!="KMAC128"&&t!="KMAC256")throw new Error(m);this.O=new Vt(t,n,i)}}update(t){this.O.update(t)}getHash(t,n){return this.O.getHash(t,n)}setHMACKey(t,n,i){this.O.setHMACKey(t,n,i)}getHMAC(t,n){return this.O.getHMAC(t,n)}}const Jt="https://ptx.transportdata.tw/MOTC/v2/",Qt="Bike/Station/",Zt="Bike/Availability/",Wt="Cycling/Shape/",te="Bike/Station/NearBy",ee="Bike/Availability/NearBy";function ne(){let e="bcee97e768f0431784373e00f3539404",t="bAY5MKsU_isyBjPsnFHcHlJgd1k",n=new Date().toUTCString(),i=new qt("SHA-1","TEXT");i.setHMACKey(t,"TEXT"),i.update("x-date: "+n);let s=i.getHMAC("B64");return{Authorization:'hmac username="'+e+'", algorithm="hmac-sha1", headers="x-date", signature="'+s+'"',"X-Date":n}}function ft(e){return{StationUID:e.StationUID,StationName:{Zh_tw:e.StationName.Zh_tw},StationPosition:{PositionLon:e.StationPosition.PositionLon,PositionLat:e.StationPosition.PositionLat},StationAddress:{Zh_tw:e.StationAddress.Zh_tw}}}function wt(e){return{StationUID:e.StationUID,ServiceStatus:e.ServiceStatus,ServiceType:e.ServiceType,AvailableRentBikes:e.AvailableRentBikes,AvailableReturnBikes:e.AvailableReturnBikes}}function ie(e){return{RouteName:e.RouteName,AuthorityName:e.AuthorityName,CityCode:e.CityCode,City:e.City,Town:e.Town,RoadSectionStart:e.RoadSectionStart,RoadSectionEnd:e.RoadSectionEnd,Direction:e.Direction,CyclingLength:e.CyclingLength,FinishedTime:e.FinishedTime,UpdateTime:e.UpdateTime,Geometry:e.Geometry}}function se(e){return String(new globalThis.URL(e,Jt))}async function I(e,t){return fetch(se(e),{method:"GET",headers:ne()}).then(n=>n.json()).then(n=>n.map(t,n)).then(Nt(console.log))}const P={getStationByCityName:(e,t,n)=>I(`${Qt}${e}?$top=10`,ft),getAvailabilityCityName:e=>I(`${Zt}${e}?$top=30`,wt),getCyclingShapeByCityName:e=>I(`${Wt}${e}`,ie),getNearByStation:(e,t)=>I(`${te}?$spatialFilter=nearby(${e},${t},${500})`,ft),getNearByAvailability:(e,t)=>I(`${ee}?$spatialFilter=nearby(${e},${t},${500})`,wt)},re=Et({id:"bike",state:()=>({loading:!1,userLocation:[],bikeStations:[],bikeAvailability:[],bikeCyclingShape:[],bikeCyclingShapeFiltered:[],bikeNearByStations:[],bikeNearByAvailability:[],selectedBikeStation:{},selectedCyclingShape:{},isRent:!0}),actions:{async getStationData(e,t,n){this.setLoading(!0);const i=await P.getStationByCityName(e,t,n);this.bikeStations=i,this.setLoading(!1)},async getAvailabilityData(e){this.setLoading(!0);const t=await P.getAvailabilityCityName(e);this.bikeAvailability=t,this.setLoading(!1)},async getCyclingShapeData(e){this.setLoading(!0);const t=await P.getCyclingShapeByCityName(e);for(let n=0;n<t.length;n++){let s=t[n].Geometry;s=s.slice(16,s.length).replaceAll("((","").replaceAll("))","").split("),(");for(let r=0;r<s.length;r++){s[r]=s[r].replaceAll(",",";").replaceAll(" ",",").split(";");for(let o=0;o<s[r].length;o++){s[r][o]=s[r][o].split(",");let l=[];l.push(parseFloat(s[r][o][1])),l.push(parseFloat(s[r][o][0])),s[r][o]=l}}t[n].Geometry=s}this.bikeCyclingShape=t,this.bikeCyclingShapeFiltered=t,this.setLoading(!1)},async getNearByStationData(e,t){this.setLoading(!0);const n=await P.getNearByStation(e,t);this.bikeNearByStations=n,this.setLoading(!1)},async getNearByAvailabilityData(e,t){this.setLoading(!0);const n=await P.getNearByAvailability(e,t);this.bikeNearByAvailability=n,this.setLoading(!1)},async setLoading(e){this.loading=e},setLocation(e,t){this.userLocation=[e,t]},setIsRent(e){this.isRent=e},setSelectedBikeStation(e){this.selectedBikeStation=e},setSelectedCyclingShape(e){this.selectedCyclingShape=e},setBikeCyclingShapeFiltered(e){this.bikeCyclingShapeFiltered=e}},getters:{nearAvailability:e=>e.bikeAvailability.filter(t=>e.bikeStations.find(n=>n.StationUID===t.StationUID)),getUserLocation:e=>e.userLocation,getAvailability:e=>e.bikeAvailability,getCyclingShape:e=>e.bikeCyclingShape,getNearByStations:e=>e.bikeNearByStations,getNearByAvailability:e=>e.bikeNearByAvailability,getSelectedBikeStation:e=>e.selectedBikeStation,getIsRent:e=>e.isRent,getHasLocation:e=>Boolean(e.userLocation[0]),getSelectedCyclingShape:e=>e.selectedCyclingShape,getCyclingShapeTown:e=>{let t=e.bikeCyclingShape.sort().map(n=>n.Town).filter(n=>typeof n=="string");return["\u5168\u90E8",...new Set(t)]},getBikeCyclingShapeFiltered:e=>{e.bikeCyclingShapeFiltered}}});var pt;(function(e){e.Chiayi="Chiayi",e.Hsinchu="Hsinchu",e.Kaohsiung="Kaohsiung",e.KinmenCounty="KinmenCounty",e.MiaoliCounty="MiaoliCounty",e.NewTaipei="NewTaipei",e.PingtungCounty="PingtungCounty",e.Taichung="Taichung",e.Tainan="Tainan",e.Taipei="Taipei",e.Taoyuan="Taoyuan"})(pt||(pt={}));var gt;(function(e){e.Chiayi="\u5609\u7FA9\u5E02",e.Hsinchu="\u65B0\u7AF9\u5E02",e.Kaohsiung="\u9AD8\u96C4\u5E02",e.KinmenCounty="\u91D1\u9580\u7E23",e.MiaoliCounty="\u82D7\u6817\u7E23",e.NewTaipei="\u65B0\u5317\u5E02",e.PingtungCounty="\u5C4F\u6771\u7E23",e.Taichung="\u81FA\u4E2D\u5E02",e.Tainan="\u81FA\u5357\u5E02",e.Taipei="\u81FA\u5317\u5E02",e.Taoyuan="\u6843\u5712\u5E02"})(gt||(gt={}));var At;(function(e){e.ChanghuaCounty="ChanghuaCounty",e.Chiayi="Chiayi",e.ChiayiCounty="ChiayiCounty",e.HsinchuCounty="HsinchuCounty",e.HualienCounty="HualienCounty",e.Kaohsiung="Kaohsiung",e.Keelung="Keelung",e.KinmenCounty="KinmenCounty",e.LienchiangCounty="LienchiangCounty",e.MiaoliCounty="MiaoliCounty",e.NantouCounty="NantouCounty",e.NewTaipei="NewTaipei",e.PenghuCounty="PenghuCounty",e.PingtungCounty="PingtungCounty",e.Taichung="Taichung",e.Tainan="Tainan",e.Taipei="Taipei",e.TaitungCounty="TaitungCounty",e.Taoyuan="Taoyuan",e.YilanCounty="YilanCounty",e.YunlinCounty="YunlinCounty"})(At||(At={}));var yt;(function(e){e.ChanghuaCounty="\u5F70\u5316\u7E23",e.Chiayi="\u5609\u7FA9\u5E02",e.ChiayiCounty="\u5609\u7FA9\u7E23",e.HsinchuCounty="\u65B0\u7AF9\u7E23",e.HualienCounty="\u82B1\u84EE\u7E23",e.Kaohsiung="\u9AD8\u96C4\u5E02",e.Keelung="\u57FA\u9686\u5E02",e.KinmenCounty="\u91D1\u9580\u7E23",e.LienchiangCounty="\u9023\u6C5F\u7E23",e.MiaoliCounty="\u82D7\u6817\u7E23",e.NantouCounty="\u5357\u6295\u7E23",e.NewTaipei="\u65B0\u5317\u5E02",e.PenghuCounty="\u6F8E\u6E56\u7E23",e.PingtungCounty="\u5C4F\u6771\u7E23",e.Taichung="\u81FA\u4E2D\u5E02",e.Tainan="\u81FA\u5357\u5E02",e.Taipei="\u81FA\u5317\u5E02",e.TaitungCounty="\u81FA\u6771\u7E23",e.Taoyuan="\u6843\u5712\u5E02",e.YilanCounty="\u5B9C\u862D\u7E23",e.YunlinCounty="\u96F2\u6797\u7E23"})(yt||(yt={}));const oe=e=>Object.values(e);export{yt as C,pt as S,gt as a,At as b,oe as g,re as u};
